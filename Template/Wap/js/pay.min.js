!function(){function a(a){$.post("/pay/yuepay",{pid:$('input[name="pid"]').val(),price:$('input[name="price"]').val()}).success(function(b){b.url?location.href=b.url:$(a).prop("disabled",!1)})}function b(){$.get("/pay/pay_weixin/price/"+$('input[name="price"]').val()+"/pid/"+$('input[name="pid"]').val()).success(function(a){if(a.status){if("OK"!=a.info.return_msg)return layer.open({content:a.info.return_msg,time:2}),!1;WeixinJSBridge.invoke("getBrandWCPayRequest",a.info.parameters,function(b){"get_brand_wcpay_request:ok"==b.err_msg&&a.url&&(location.href=a.url)})}})}function c(a){$("form").attr("action","/pay/pay_alipay").submit()}function d(a){return $('input[name="price"]').val()?void("undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",b,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",b),document.attachEvent("onWeixinJSBridgeReady",b)):b()):(layer.open({content:"\u8bf7\u9009\u62e9\u5145\u503c\u91d1\u989d\uff01",time:2}),$(a).prop("disabled",!1),!1)}$(".paybut").parents("form").submit(function(){var b=$('input[name="pay_type"]:checked').val();switch($(this).find(".paybut").prop("disabled",!0),b){case"2":d(this);break;case"3":c(this);break;default:a(this)}return!1}),$(".dollar").click(function(){$(".dollar").removeClass("active"),$(this).addClass("active"),$(this).hasClass("not")?$('[name="price"]').val($(this).find("input").val()):$('[name="price"]').val($(this).text())}),$(".dollar-more").click(function(){$(".dollar").removeClass("active")}),$('input[name="price_ye"]').bind("input propertychange",function(a){$('input[name="price"]').val($(this).val())})}();